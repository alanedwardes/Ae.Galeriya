<h2>Upload Photos</h2>

<script>
    function readFile(file){
        return new Promise((resolve, reject) => {
            var fr = new FileReader();  
            fr.onload = () => {
                resolve(fr.result )
            };
            fr.onerror = reject;
            fr.readAsArrayBuffer(file);
        });
    }

    function digestToHex(hashBuffer) {
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function directorySelected(element) {
        const fileReader = new FileReader();
        for (const file of element.files) {
            const contents = await readFile(file);
            const hashBuffer = await crypto.subtle.digest('SHA-256', contents);
            const hash = digestToHex(hashBuffer);
            console.log(file, hash);
        }
    }
</script>

<input type="file" webkitdirectory onchange="directorySelected(this)" />